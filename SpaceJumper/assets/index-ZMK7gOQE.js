var t=Object.defineProperty,e=(e,i,s)=>((e,i,s)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s)(e,"symbol"!=typeof i?i+"":i,s);import{r as i,g as s}from"./phaser-CLYd3JIB.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var o=i();const a=s(o);class n extends o.Scene{constructor(){super("Boot")}preload(){this.load.image("background","./assets/SpaceBackground.png"),this.load.image("maskotFront","./assets/Mascot_Front.png"),this.load.image("maskotBack","./assets/Mascot_Back.png"),this.load.image("imgCoin","./assets/Coin.png"),this.load.image("imgChest","./assets/Chest.png"),this.load.image("imgFuel","./assets/Fuel.png"),this.load.image("imgPlus","./assets/Plus.png"),this.load.image("imgCrypto","./assets/TON_coin.png"),this.load.image("imgChestHiRes","./assets/ChestHiRes.png"),this.load.image("imgIconGalaxy","./assets/icon_galaxy2.png"),this.load.image("imgIconSettings","./assets/icon_settings.png"),this.load.image("imgIconChest","./assets/Chest1.png"),this.load.image("imgCircle","./assets/Circle.png"),this.load.image("imgBluButton2x","./assets/BlueButton_double.png"),this.load.image("imgPurpleButton4x","./assets/PurpleButton_4x.png"),this.load.image("imgPurpleFuelButton","./assets/PurpleFuelButton.png"),this.load.image("imgPurpleFuelButton2x","./assets/PurpleFuelButton2x.png"),this.load.image("imgGalaxy","./assets/milky-way-1.png"),this.load.image("imgAsteroid","./assets/Asteroid Brown.png"),this.load.image("imgSpaceBackground","./assets/SpaceBlue3.png"),this.load.image("imgSpaceStars","./assets/BlueStars.png"),this.load.image("imgBackAsteroid_1","./assets/gen asteroid 1.png"),this.load.image("imgBackAsteroid_2","./assets/gen asteroid 2.png"),this.load.image("imgBackAsteroid_3","./assets/gen asteroid 3.png"),this.load.image("imgBackAsteroid_4","./assets/gen asteroid 4.png"),this.load.image("imgBackAsteroid_5","./assets/gen asteroid 5.png"),this.load.spritesheet("sheetCircleExp","./assets/spritesheet_CircleExplosion.png",{frameWidth:256,frameHeight:256}),this.load.spritesheet("sheetThrust","./assets/spritesheet_Thrust.png",{frameWidth:32,frameHeight:32})}create(){this.scene.start("Preloader")}}class r{constructor(){this.roundStarted=!1,this.isDead=!1,this.isDebugMode=!0,this.textShowRoundTime,this.tweenPlayerIdle,this.tweenPlayerDying,this.timer,this.startTime=0,this.roundTime=0,this.roundTimeLimit=9e3,this.playerRef,this.trapDelay=9e3,this.trapTimeSpawnedAt=0,this.trapSpawnTimer=this.trapDelay,this.trapAroundGap=3e3,this.coinDelay=2500,this.coinTimeSpawnedAt=0,this.coinSpawnTimer=0,this.eventEmmiter,this.textShowHowToStart,this.textShowAvoidObstacles,this.textShowCollectCoins,this.imgShowObstacle,this.imgShowTreasure1,this.imgShowTreasure2,this.tweenShowHowToStart,this.tweenInstructions}setupRoundController(t){this.textShowRoundTime=t.add.text(10,10,"Round Time",{fontFamily:"Inter",fontStyle:"Bold",fontSize:15,color:"#ffffff",stroke:"#000000",strokeThickness:1}),this.timer=t.time,this.playerRef=t.playerControll.player,this.eventEmmiter=new a.Events.EventEmitter,this.eventEmmiter.on("spawnTrap",(()=>{t.trapControll.spawnTrapLogic(t)})),this.eventEmmiter.on("spawnCoin",(()=>{t.prizeDropControll.spawnCoinLogic(t)})),this.eventEmmiter.on("roundTimeExpired",(()=>{t.roundTimeExpired()}))}setupRoundInstructions(t){this.textShowHowToStart=t.add.text(L/2,D-200,"TAP TO START",{fontFamily:"Inter",fontStyle:"Bold",fontSize:40,color:"#ffffff",stroke:"#000000",strokeThickness:2}).setOrigin(.5),this.tweenShowHowToStart=t.tweens.add({targets:this.textShowHowToStart,props:{scale:{value:1.4,ease:"Sine.easeOut"}},duration:1e3,repeat:-1,yoyo:!0}),this.textShowAvoidObstacles=t.add.text(L/2+100,200,"<— Avoid deadly obstacles\nthat are on your way.",{fontFamily:"Inter",fontStyle:"Bold",fontSize:25,color:"#ffffff",stroke:"#000000",strokeThickness:2}).setOrigin(.5),this.textShowCollectCoins=t.add.text(L/2,400,"<— Find and collect treasures —>\n    by using your space magnet",{fontFamily:"Inter",fontStyle:"Bold",fontSize:25,color:"#ffffff",stroke:"#000000",strokeThickness:2}).setOrigin(.5),this.imgShowObstacle=t.add.sprite(L/2-100,200,"imgAsteroid").setScale(.8,.8).setOrigin(1,.5),this.imgShowTreasure1=t.add.sprite(L/2+250,400,"imgCoin").setScale(.8,.8).setOrigin(0,.5),this.imgShowTreasure2=t.add.sprite(L/2-250,400,"imgCoin").setScale(.8,.8).setOrigin(1,.5),this.tweenInstructions=t.tweens.add({targets:[this.textShowAvoidObstacles,this.textShowCollectCoins,this.imgShowObstacle,this.imgShowTreasure1,this.imgShowTreasure2],props:{scale:{value:1.1,ease:"Sine.easeOut"}},duration:1e3,repeat:-1,yoyo:!0})}hideInstructions(){this.textShowHowToStart.visible=!1,this.tweenShowHowToStart.complete(),this.tweenPlayerIdle.complete(),this.textShowAvoidObstacles.visible=!1,this.textShowCollectCoins.visible=!1,this.imgShowObstacle.setVisible(!1),this.imgShowTreasure1.setVisible(!1),this.imgShowTreasure2.setVisible(!1),this.tweenInstructions.complete()}startRound(){this.roundStarted||(this.hideInstructions(),this.roundStarted=!0,this.playerRef.body.allowGravity=!0,this.startTime=this.timer.now,this.trapTimeSpawnedAt=this.timer.now)}refreshUpdate(){this.isDebugMode&&this.textShowRoundTime.setText(`Scene Time ${this.timer.now}\nRound Time ${this.roundTime} | ${this.roundTimeLimit}\nTime since last trap spawn ${this.trapSpawnTimer} | ${this.trapDelay}\nTime since last coin spawn ${this.coinSpawnTimer} | ${this.coinDelay}`),this.roundStarted&&(this.isDead||(this.roundTime=Math.round(this.timer.now-this.startTime),this.trapSpawnTimer>=this.trapDelay?(this.trapTimeSpawnedAt=this.timer.now,this.trapSpawnTimer=0,this.eventEmmiter.emit("spawnTrap")):this.trapSpawnTimer=Math.round(this.timer.now-this.trapTimeSpawnedAt),this.coinSpawnTimer>=this.coinDelay?this.timer.now-this.trapTimeSpawnedAt>this.trapAroundGap&&(this.coinTimeSpawnedAt=this.timer.now,this.coinSpawnTimer=0,this.eventEmmiter.emit("spawnCoin")):this.coinSpawnTimer=Math.round(this.timer.now-this.coinTimeSpawnedAt),this.roundTime>this.roundTimeLimit&&(this.eventEmmiter.emit("roundTimeExpired"),this.roundStarted=!1)))}}class l{constructor(){this.trapsArray=[]}refreshUpdate(){for(let t=0;t<this.trapsArray.length;t++)this.trapsArray[t].updateObj()}destroyAllObjects(){this.trapsArray.forEach((t=>{t.destroyAllObjects()}))}spawnTrapLogic(t){console.log("Spawning trap");var e=new h,i=t.add.rectangle(L/2,-100,L,10,10860233,256);t.physics.world.enable(i),i.body.allowGravity=!1,i.body.velocity.y=t.moveSpeed,e.trapLine=i,e.isMirrored=Math.round(Math.random()),this.spawnVisualsLayer(t,e,.5,5,18,300),this.spawnVisualsLayer(t,e,1,2.5,6,200),this.spawnObstacles(t,e),t.trapControll.trapsArray.push(e)}spawnObstacles(t,e){var i=(L+200)/3;e.spawnAsteroid(t,0,50*Math.random()-100,100),e.spawnAsteroid(t,i,50*Math.random()-100,100),e.spawnAsteroid(t,2*i,50*Math.random()-100,100)}spawnVisualsLayer(t,e,i,s,o,a){var n=(L+200)/o;for(let r=0;r<o;r++)e.spawnDecorativeAsteroid(t,n*r,Math.random()*a-200,i,s)}}class h{constructor(){this.isMirrored=!1,this.trapLine,this.asteroids=[],this.decoAsteroids=[]}updateObj(){for(let t=0;t<this.asteroids.length;t++)this.asteroids[t].refreshPosition(this.trapLine.y,this.isMirrored)}destroyAllObjects(){this.asteroids.forEach((t=>{t.circleObj.destroy()})),this.decoAsteroids.forEach((t=>{t.circleObj.destroy()}))}spawnAsteroid(t,e,i,s){var o=new d;return o.circleObj=t.add.sprite(e,i,"imgAsteroid").setScale(.8,.8).setAngle(180*Math.random()-90),o.offsetY=i,t.physics.world.enable(o.circleObj),o.circleObj.body.allowGravity=!1,this.isMirrored?o.circleObj.body.velocity.x=-s:o.circleObj.body.velocity.x=s,o.circleObj.body.setCircle(60,15,20),t.physics.add.overlap(o.circleObj,t.playerControll.player,t.collisionPlayerAsteroid,null,t),this.asteroids.push(o),o}spawnDecorativeAsteroid(t,e,i,s,o){var a=new d;return a.circleObj=t.add.sprite(e,i,`imgBackAsteroid_${Math.round(4*Math.random()+1)}`).setScale(s,s).setAngle(180*Math.random()-90),a.offsetY=i,a.isDeco=!0,this.isMirrored?a.decoSpeed=-o:a.decoSpeed=o,this.asteroids.push(a),a}}class d{constructor(){this.circleObj,this.offsetY=0,this.outOfMapRange=100,this.isDeco=!1,this.decoSpeed}refreshPosition(t,e){e?(this.circleObj.y=t+this.offsetY,this.circleObj.x<-this.outOfMapRange&&(this.circleObj.x=L+this.outOfMapRange)):(this.circleObj.y=t+this.offsetY,this.circleObj.x>L+this.outOfMapRange&&(this.circleObj.x=-this.outOfMapRange)),this.isDeco&&(this.circleObj.x+=this.decoSpeed)}}class c{constructor(){this.backLayers=[]}refreshUpdate(){for(let t=0;t<this.backLayers.length;t++)this.backLayers[t].update()}setupSpaceBackground(t){this.backLayers.push(new u(t.add.image(L/2,D/2,"imgSpaceBackground"),t.add.image(L/2,D/2,"imgSpaceBackground"),.3,2)),this.backLayers.push(new u(t.add.image(L/2,D/2,"imgSpaceStars"),t.add.image(L/2,D/2,"imgSpaceStars"),.4,2))}}class u{constructor(t,e,i,s){this.imgPart1=t,this.imgPart1.setScale(s,s),this.imgPart2=e,this.imgPart2.setScale(s,s),this.imgPart2.y-=this.imgPart1.height*s,this.moveSpeed=i,this.size=s,this.initialPosition=this.imgPart1.y,this.currentHeight=this.imgPart1.height*this.size,this.lowBorder=this.currentHeight+this.initialPosition}update(){this.imgPart1.y+=this.moveSpeed,this.imgPart2.y+=this.moveSpeed,this.checkLowBorder(this.imgPart1),this.checkLowBorder(this.imgPart2)}checkLowBorder(t){t.y>this.lowBorder&&(t.y-=2*this.currentHeight)}}class g{constructor(){this.coinSet=new Set,this.effectCoinPickup}init(t){this.effectCoinPickup=t.add.particles(0,0,"imgCoin",{speed:100,scale:.3,duration:100,emitting:!1})}addCoin(t){this.coinSet.add(t)}refreshUpdate(){this.coinSet.forEach((t=>{t.updateObj()}))}destroyAllObjects(){this.coinSet.forEach((t=>{t.imgPrize.destroy(),t.textAmmount.destroy()}))}pickupCoin(t){this.effectCoinPickup.x=t.imgPrize.x,this.effectCoinPickup.y=t.imgPrize.y,this.effectCoinPickup.start(),this.deleteCoin(t)}deleteCoin(t){this.coinSet.delete(t),t.destroy()}spawnCoinLogic(t){console.log("Spawning coin");let e=Math.round(Math.random()),i=Math.round(9*Math.random()+1),s=20+Math.round(120*Math.random());if(e){const o=this.spawnCoin(t,L-s,-65,i,e);this.addCoin(o)}else{const o=this.spawnCoin(t,s,-65,i,e);this.addCoin(o)}}spawnCoin(t,e,i,s,o){var a=new m;return a.imgPrize=t.add.sprite(e,i,"imgCoin").setScale(.8,.8),a.textAmmount=t.add.text(e,i+a.offsetText,`${s}`,{fontFamily:"Inter",fontStyle:"Bold",fontSize:20,color:"#ffffff",stroke:"#000000",strokeThickness:1}).setOrigin(.5),a.numAmmount=s,a.isRight=o,a.initialX=e,t.physics.world.enable(a.imgPrize),a.imgPrize.body.allowGravity=!1,a.imgPrize.body.velocity.y=t.moveSpeed,t.physics.add.overlap(a.imgPrize,t.playerControll.player,(()=>{this.pickupCoin(a)})),t.physics.add.overlap(a.imgPrize,t.playerControll.playerMagnet,a.collisionMagnetCoin,null,a),a}}class m{constructor(){this.imgPrize,this.textAmmount,this.numAmmount,this.offsetText=45,this.isRight,this.pullSpeed=4,this.pullbackSpeed=0,this.isPulling=!1,this.initialX,this.isMoved=!1}destroy(){this.imgPrize.destroy(),this.textAmmount.destroy()}updateObj(){this.textAmmount.y=this.imgPrize.y+this.offsetText,this.textAmmount.x=this.imgPrize.x,this.isPulling?(this.isPulling=!1,this.isMoved=!0,this.isRight?this.imgPrize.x-=this.pullSpeed:this.imgPrize.x+=this.pullSpeed):this.isMoved&&(this.isRight?(this.imgPrize.x+=this.pullbackSpeed,this.imgPrize.x>this.initialX&&(this.isMoved=!1)):(this.imgPrize.x-=this.pullbackSpeed,this.imgPrize.x<this.initialX&&(this.isMoved=!1)))}collisionMagnetCoin(){this.isPulling=!0}}class p{constructor(){this.SpeedUp=-600,this.player,this.playerMagnet,this.offsetMagnet=-10,this.jumpOn=!1,this.effectJetpackThrust}setupPlayer(t){const e=L/2,i=D/2+200;this.playerMagnet=t.add.rectangle(e,i,L,70,535434,240),t.physics.world.enable(this.playerMagnet),this.playerMagnet.body.allowGravity=!1,this.playerMagnet.body.immovable=!0,this.player=t.add.image(e,i,"maskotBack").setScale(1.1,1.1),t.physics.world.enable(this.player),this.player.body.allowGravity=!1,this.player.body.setCollideWorldBounds(!0),this.player.body.setMaxVelocity(0,800),this.player.body.setCircle(32,17,15),t.roundControll.tweenPlayerIdle=t.tweens.add({targets:this.player,y:D/2+50,ease:"Sine.easeOut",duration:800,repeat:-1,yoyo:!0}),this.effectJetpackThrust=t.add.sprite(300,300,"sheetThrust").setScale(2.1,2.1).setOrigin(.5,.2),this.effectJetpackThrust.play("thrust",!0)}refreshUpdate(){this.jumpOn?(this.player.body.velocity.y=this.SpeedUp,this.effectJetpackThrust.setScale(3.2,4).setOrigin(.5,.2)):this.effectJetpackThrust.setScale(1.8,1.8).setOrigin(.5,.2),this.playerMagnet.y=this.player.y,this.effectJetpackThrust.x=this.player.x-10,this.effectJetpackThrust.y=this.player.y+25}}class f{constructor(){this.rewardBoxes=[],this.rectBackground,this.rectPanel,this.imgReturnButton,this.textTitle,this.textDescription,this.textReward,this.textReturnButton}ShowEverything(t){this.rectBackground.setVisible(t),this.rectPanel.setVisible(t),this.imgReturnButton.setVisible(t),this.textTitle.visible=t,this.textDescription.visible=t,this.textReward.visible=t,this.textReturnButton.visible=t}createPage(t){this.rectBackground=t.add.rectangle(0,0,L,D,0,60).setOrigin(0).setInteractive().on("pointerdown",((t,e,i,s)=>{})),this.rectPanel=t.add.rectangle(L/2,D/2,L-40,490,2043445,40).setOrigin(.5,.5).setRounded(10).setStrokeStyle(4,0).setInteractive(),this.imgReturnButton=t.add.image(L/2,D/2+180,"imgPurpleButton4x").setScale(.8,.7).setOrigin(.5).setInteractive().on("pointerdown",((e,i,s,o)=>{t.toMainMenu()})),this.textTitle=t.add.text(L/2,D/2-200,"END OF THE JOURNEY",{fontFamily:"Inter",fontStyle:"Bold",fontSize:30,color:"#FFFFFF"}).setOrigin(.5),this.textDescription=t.add.text(L/2,D/2-100,"Maoga, traveling through this galaxy, you have collected many awards. But this is not the end of your journey. There are even more galaxies and rewards waiting for you ahead.",{fontFamily:"Inter",fontStyle:"Bold",fontSize:20,color:"#ffffff",stroke:"#000000",strokeThickness:1,wordWrap:{width:600}}).setOrigin(.5),this.textReward=t.add.text(L/2,D/2-10,"Reward:",{fontFamily:"Inter",fontStyle:"Bold",fontSize:25,color:"#FEBB19",stroke:"#000000",strokeThickness:1}).setOrigin(.5),this.textReturnButton=t.add.text(L/2,D/2+180,"Get it and return to the spaceport",{fontFamily:"Inter",fontStyle:"Bold",fontSize:20,color:"#FEBB19",stroke:"#000000",strokeThickness:1}).setOrigin(.5),this.ShowEverything(!1)}}class y{constructor(){this.textCoin,this.textTon,this.textFuel}createTopIndicators(t,e=!0){t.add.rectangle(0,-20,L,100,2043445,60).setOrigin(0).setRounded(10).setDepth(100);let i=40;t.add.rectangle(L/2,i,L-80,30,1449766,1).setOrigin(.5).setRounded(10).setDepth(100),t.add.rectangle(20,i,190,60,1449766,1).setOrigin(0,.5).setRounded(10).setDepth(100),t.add.rectangle(L/2,i,190,60,1449766,1).setOrigin(.5,.5).setRounded(10).setDepth(100),t.add.rectangle(L-20,i,190,60,1449766,1).setOrigin(1,.5).setRounded(10).setDepth(100),t.add.image(50,i,"imgCoin").setScale(.7).setDepth(100),this.textCoin=t.add.text(85,i,"40159",{fontFamily:"Inter",fontStyle:"Bold",fontSize:23,color:"#ffffff",stroke:"#000000",strokeThickness:1}).setOrigin(0,.5).setDepth(100);let s=L/2-62;t.add.image(s,i,"imgCrypto").setScale(.25).setDepth(100),this.textTon=t.add.text(s+35,i,"24",{fontFamily:"Inter",fontStyle:"Bold",fontSize:23,color:"#ffffff",stroke:"#000000",strokeThickness:1}).setOrigin(0,.5).setDepth(100);let o=L-185;e?(t.add.image(o,i,"imgFuel").setScale(.4).setDepth(100),t.add.image(o+130,i,"imgPlus").setScale(.6).setDepth(100).setInteractive().on("pointerdown",((e,i,s,o)=>{t.fuelBuyPage.ShowEverything(!0)}))):t.add.image(o,i,"imgIconChest").setScale(.4).setDepth(100),this.textFuel=t.add.text(o+35,i,"143",{fontFamily:"Inter",fontStyle:"Bold",fontSize:23,color:"#ffffff",stroke:"#000000",strokeThickness:1}).setOrigin(0,.5).setDepth(100)}setValues(t,e,i){this.textCoin.text=t,this.textTon.text=e,this.textFuel.text=i}}class w extends o.Scene{constructor(){super("Game"),this.backgroundControll,this.playerControll,this.roundControll,this.trapControll,this.prizeDropControll,this.gameEndPage,this.topIndicators,this.moveSpeed=200,this.deathExplosion}create(){this.backgroundControll=new c,this.playerControll=new p,this.roundControll=new r,this.trapControll=new l,this.prizeDropControll=new g,this.gameEndPage=new f,this.topIndicators=new y,this.physics.world.gravity.y=1500,this.backgroundControll.setupSpaceBackground(this),this.playerControll.setupPlayer(this),this.setupInput(),this.roundControll.setupRoundController(this),this.roundControll.setupRoundInstructions(this),this.prizeDropControll.init(this),this.gameEndPage.createPage(this),this.topIndicators.createTopIndicators(this,!1),this.topIndicators.setValues(0,0,0),this.deathExplosion=this.add.sprite(300,300,"sheetCircleExp").setScale(1.5,1.5),this.cameras.main.fadeIn(500,0,0,0)}update(){this.playerControll.refreshUpdate(),this.roundControll.refreshUpdate(),this.roundControll.roundStarted&&(this.trapControll.refreshUpdate(),this.prizeDropControll.refreshUpdate()),this.backgroundControll.refreshUpdate()}setupInput(){const t=this.add.rectangle(0,D,L,600,16777215,0).setOrigin(0,1).setInteractive();t.on("pointerdown",(()=>{this.inputJumpStart()})),t.on("pointerup",(()=>{this.inputJumpEnd()}));var e=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);e.on("down",(()=>{this.inputJumpStart()})),e.on("up",(()=>{this.inputJumpEnd()}))}inputJumpStart(){this.playerControll.jumpOn=!0,this.roundControll.startRound()}inputJumpEnd(){this.playerControll.jumpOn=!1,this.playerControll.player.body.velocity.y=-400}collisionPlayerAsteroid(){this.roundControll.roundStarted&&this.gameOver()}roundTimeExpired(){this.gameEndPage.textTitle.text="YOU WIN!",this.gameEndPage.textDescription.text="Maoga, you have flown to the very end of this galaxy and collected many rewards. But this is not the end of your journey. There are even more galaxies and rewards waiting for you ahead.",this.gameOver()}gameOver(){this.playerControll.effectJetpackThrust.destroy(),this.playerControll.playerMagnet.destroy(),this.deathExplosion.x=this.playerControll.player.x,this.deathExplosion.y=this.playerControll.player.y,this.deathExplosion.play("explode",!0),this.physics.world.disable(this.playerControll.player),this.roundControll.tweenPlayerDying=this.tweens.add({targets:this.playerControll.player,props:{scale:{value:0,ease:"Sine.easeIn"}},duration:100,repeat:0,yoyo:!1}),this.roundControll.isDead=!0,this.prizeDropControll.destroyAllObjects(),setTimeout((()=>{this.gameEndPage.ShowEverything(!0),this.roundControll.roundStarted=!1,this.trapControll.destroyAllObjects()}),1e3)}toMainMenu(){this.gameEndPage.ShowEverything(!1),this.cameras.main.fade(1e3,0,0,0),setTimeout((()=>{this.scene.start("MainMenu")}),1500)}}class S extends o.Scene{constructor(){super("GameOver")}create(){this.cameras.main.setBackgroundColor(16711680),this.add.image(512,384,"background").setAlpha(.5),this.add.text(512,384,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}}var x="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NjIzNDU3OTksImlhdCI6MTc2MjM0MjE5OSwidXNlcl9pZCI6MTgzOTczfQ.hTnsgQYsmRRM4B-H4urFCq61ugi-jS4IkGl4hUE6aZ0";async function B(t,e={}){const i={Authorization:`Bearer ${x}`,"Content-Type":"application/json"},s=await fetch("https://dev.oilf.farm/api"+t,{headers:i,...e});return s.ok||console.error(s),await s.json()}const b="net_LevelPanel_",k="net_Fuel_",I="net_Crate_";class T{static async LoadTextures(t){if(this.isDataLoaded)return;let e=0;this.LevelsList.forEach((i=>{t.load.image(`${b}${e}`,i.preview_image),t.load.image(`net_LevelBack_${e}`,i.background_image),e++})),e=0,this.FuelList.forEach((i=>{t.load.image(`${k}${e}`,i.image),e++})),e=0,this.CrateList.forEach((i=>{t.load.image(`${I}${e}`,i.image),e++})),this.isDataLoaded=!0}static async GetLevelData(){await B("/mini-game/levels").then((t=>{console.log(t),this.LevelsList=t}))}static async GetFuelData(){await B("/mini-game/fuel-offers").then((t=>{console.log(t),this.FuelList=t}))}static async GetChestData(){await B("/mini-game/my-chests").then((t=>{console.log(t),this.CrateList=t}))}static async SendWithdrawalRequest(){}}e(T,"LevelsList"),e(T,"FuelList"),e(T,"CrateList"),e(T,"LevelAmmount",-1),e(T,"CrateAmmount",-1),e(T,"isDataLoaded",!1);class C{constructor(){this.galaxyPanels=[],this.imgBackground,this.textChoose}ShowEverything(t){this.imgBackground.setVisible(t);for(let e=0;e<this.galaxyPanels.length;e++)this.galaxyPanels[e].SetVisibility(t)}createGalaxyPage(t){this.imgBackground=t.add.rectangle(0,0,L,D,0,60).setOrigin(0).setInteractive().on("pointerdown",((t,e,i,s)=>{this.ShowEverything(!1)}));let e=0;T.LevelsList.forEach((i=>{let s=this.createGalaxyPanel(t,120+300*e,i,e);this.galaxyPanels.push(s),e++})),this.ShowEverything(!1)}createGalaxyPanel(t,e,i,s){let o=new F;o.backgroundPicFaded=t.add.rectangle(20,e+10,L-40,280,2043445,40).setOrigin(0).setRounded(10).setInteractive(),o.backgroundPicOutline=t.add.rectangle(L/2,e+115,L-55,120,1401470,20).setOrigin(.5).setRounded(10),o.backgroundPic=t.add.image(L/2,e+60,`${b}${s}`).setOrigin(.5,0).setScale(.69,.55),o.nameText=t.add.text(40,e+20,i.title,{fontFamily:"Inter",fontStyle:"Bold",fontSize:20,color:"#FEBB19",stroke:"#000000",strokeThickness:1}),o.textDescription=t.add.text(40,e+180,i.description,{fontFamily:"Inter",fontStyle:"Bold",fontSize:18,color:"#FFFFFF",stroke:"#000000",strokeThickness:1,wordWrap:{width:660}});let a=e+260;i.coins_count>0&&(o.coinIcon=t.add.image(40,a,"imgCoin").setScale(.6,.6).setOrigin(0,.5),o.coinText=t.add.text(90,a,i.coins_count,{fontFamily:"Inter",fontStyle:"Bold",fontSize:20,color:"#ffffff",stroke:"#000000",strokeThickness:1}).setOrigin(0,.5)),i.ton>0&&(o.cryptoIcon=t.add.image(160,a,"imgCrypto").setScale(.2,.2).setOrigin(0,.5),o.cryptoText=t.add.text(210,a,i.ton,{fontFamily:"Inter",fontStyle:"Bold",fontSize:20,color:"#ffffff",stroke:"#000000",strokeThickness:1}).setOrigin(0,.5));let n=L-100;return o.rectFuelCost=t.add.rectangle(n-100,a,150,30,2563894,1).setRounded(16).setStrokeStyle(2,0),o.imgFuel=t.add.image(n-150,a,"imgFuel").setScale(.4,.4),o.textFuel=t.add.text(n-120,a,`143/${i.fuel_race_fee}`,{fontFamily:"Inter",fontStyle:"Bold",fontSize:16,color:"#ffffff",stroke:"#000000",strokeThickness:1}).setOrigin(0,.5),o.buttonPlayRect=t.add.image(n,a,"imgPurpleFuelButton").setScale(.4,.4).setInteractive().on("pointerdown",((e,i,s,o)=>{t.startGame()})),o.buttonPlayText=t.add.text(n,a,"Start",{fontFamily:"Inter",fontStyle:"Bold",fontSize:18,color:"#ffffff",stroke:"#000000",strokeThickness:1}).setOrigin(.5),o}}class F{constructor(){this.backgroundPicOutline,this.backgroundPic,this.backgroundPicFaded,this.nameText,this.textDescription,this.isDemo,this.coinText,this.coinIcon,this.cryptoText,this.cryptoIcon,this.buttonPlayRect,this.buttonPlayText,this.rectFuelCost,this.imgFuel,this.textFuel}SetVisibility(t){this.backgroundPicOutline.setVisible(t),this.backgroundPic.setVisible(t),this.backgroundPicFaded.setVisible(t),this.nameText.visible=t,this.textDescription.visible=t,this.coinText.visible=t,this.coinIcon.setVisible(t),this.cryptoText&&this.cryptoIcon&&(this.cryptoText.visible=t,this.cryptoIcon.setVisible(t)),this.buttonPlayRect.setVisible(t),this.buttonPlayText.visible=t,this.rectFuelCost.setVisible(t),this.imgFuel.setVisible(t),this.textFuel.visible=t}}class v{constructor(){this.buyPanels=[],this.imgBackground,this.textChoose}ShowEverything(t){this.imgBackground.setVisible(t),this.textChoose.visible=t;for(let e=0;e<this.buyPanels.length;e++)this.buyPanels[e].SetVisibility(t)}createFuelBuyPage(t){this.imgBackground=t.add.rectangle(0,0,L,D,0,60).setOrigin(0).setInteractive().on("pointerdown",((t,e,i,s)=>{this.ShowEverything(!1)})),this.textChoose=t.add.text(L/2,130,"FUEL MARKET",{fontFamily:"Inter",fontStyle:"Bold",fontSize:30,color:"#FFFFFF"}).setOrigin(.5);let e=250;this.buyPanels.push(this.createFuelBuyPanel(t,T.FuelList,0,e,10)),this.buyPanels.push(this.createFuelBuyPanel(t,T.FuelList,1,e+=250,20)),this.buyPanels.push(this.createFuelBuyPanel(t,T.FuelList,2,e+=250,30)),this.ShowEverything(!1)}createFuelBuyPanel(t,e,i,s){let o=new O;o.rectBackground=t.add.rectangle(L/2,s,L-40,220,2043445,40).setOrigin(.5,0).setRounded(10).setStrokeStyle(4,0).setInteractive(),o.rectFuel=t.add.rectangle(110,s+90,150,150,1401470,20).setOrigin(.5).setRounded(10).setStrokeStyle(4,0),o.imgFuel=t.add.image(110,s+90,`${k}${i}`).setScale(.5,.5).setOrigin(.5),o.textAmmount=t.add.text(110,s+185,`x${e[i].rocket_fuel}`,{fontFamily:"Inter",fontStyle:"Bold",fontSize:25,color:"#FEBB19"}).setOrigin(.5);let a=s+180;o.rectButton=t.add.rectangle(L-200,a,200,30,2563894,1).setRounded(16).setStrokeStyle(2,0),o.imgBuy=t.add.image(L-85,a,"imgPurpleFuelButton").setScale(.4,.4).setOrigin(.5).setInteractive().on("pointerdown",((t,e,i,s)=>{})),o.textBuy=t.add.text(L-85,a,"BUY",{fontFamily:"Inter",fontStyle:"Bold",fontSize:18,color:"#FEBB19",stroke:"#000000",strokeThickness:1}).setOrigin(.5),o.textPrice=t.add.text(L-240,a,`${e[i].ton_cost}`,{fontFamily:"Inter",fontStyle:"Bold",fontSize:18,color:"#FFFFFF",stroke:"#000000",strokeThickness:1}).setOrigin(0,.5),o.imgCryptoIcon=t.add.image(L-270,a,"imgCrypto").setScale(.25,.25);let n=L/2-150,r=s+40;return o.textOffer=t.add.text(n,r,`${e[i].title}`,{fontFamily:"Inter",fontStyle:"Bold",fontSize:25,color:"#FEBB19",stroke:"#000000",strokeThickness:1}).setOrigin(0),o.textDescription=t.add.text(n,r+40,`${e[i].description}`,{fontFamily:"Inter",fontStyle:"Bold",fontSize:18,color:"#ffffff",stroke:"#000000",strokeThickness:1,wordWrap:{width:400}}).setOrigin(0),o}}class O{constructor(){this.rectBackground,this.rectFuel,this.imgFuel,this.textAmmount,this.textOffer,this.textDescription,this.rectButton,this.imgBuy,this.textBuy,this.textPrice,this.imgCryptoIcon}SetVisibility(t){this.rectBackground.setVisible(t),this.rectFuel.setVisible(t),this.imgFuel.setVisible(t),this.textAmmount.visible=t,this.textOffer.visible=t,this.textDescription.visible=t,this.rectButton.setVisible(t),this.imgBuy.setVisible(t),this.textBuy.visible=t,this.textPrice.visible=t,this.imgCryptoIcon.setVisible(t)}}class P{constructor(){this.casePanels=[],this.imgBackground,this.textChoose}ShowEverything(t){this.imgBackground.setVisible(t),this.textChoose.visible=t;for(let e=0;e<this.casePanels.length;e++)this.casePanels[e].SetVisibility(t)}createCaseOpenPage(t){this.imgBackground=t.add.rectangle(0,0,L,D,0,60).setOrigin(0).setInteractive().on("pointerdown",((t,e,i,s)=>{this.ShowEverything(!1)})),this.textChoose=t.add.text(L/2,130,"FOUND CHESTS",{fontFamily:"Inter",fontStyle:"Bold",fontSize:30,color:"#FFFFFF"}).setOrigin(.5);let e=0;T.CrateList.forEach((i=>{var s=this.createCaseOpenPanel(t,T.CrateList,e,250+250*e);this.casePanels.push(s),e++})),this.ShowEverything(!1)}createCaseOpenPanel(t,e,i,s){var o=new E;o.dataIndex=i,o.rectBackground=t.add.rectangle(L/2,s,L-40,220,2043445,40).setOrigin(.5,0).setRounded(10).setStrokeStyle(4,0).setInteractive(),o.rectCase=t.add.rectangle(110,s+90,150,150,1401470,20).setOrigin(.5).setRounded(10).setStrokeStyle(4,0),o.imgCase=t.add.image(110,s+90,`${I}${i}`).setScale(1,1).setOrigin(.5),o.imgCircle=t.add.image(180,s+160,"imgCircle").setScale(.3,.3),o.textAmmount=t.add.text(180,s+160,`${e[i].count}`,{fontFamily:"Inter",fontStyle:"Bold",fontSize:20,color:"#FEBB19"}).setOrigin(.5);let a=s+180;o.rectButton=t.add.rectangle(L-200,a,200,30,2563894,1).setRounded(16).setStrokeStyle(2,0),o.imgBuy=t.add.image(L-85,a,"imgPurpleFuelButton").setScale(.4,.4).setOrigin(.5).setInteractive().on("pointerdown",((t,e,i,s)=>{o.RequestOpenCase()})),o.textBuy=t.add.text(L-85,a,"OPEN",{fontFamily:"Inter",fontStyle:"Bold",fontSize:18,color:"#FEBB19",stroke:"#000000",strokeThickness:1}).setOrigin(.5),o.textPrice=t.add.text(L-240,a,`143 / ${e[i].fuel_opening_cost}`,{fontFamily:"Inter",fontStyle:"Bold",fontSize:18,color:"#FFFFFF",stroke:"#000000",strokeThickness:1}).setOrigin(0,.5),o.rectRewardButton=t.add.rectangle(L-300,a,400,30,2563894,1).setRounded(16).setStrokeStyle(2,0),o.imgRewardButton=t.add.image(L-85,a,"imgPurpleFuelButton").setScale(.4,.4).setOrigin(.5).setInteractive().on("pointerdown",((t,e,i,s)=>{o.SetVisibility(!0),o.ShowReward(!1)}));let n=L-470;o.imgRewardCoin=t.add.image(n,a,"imgCoin").setScale(.75,.75),o.imgRewardCrypto=t.add.image(n+200,a,"imgCrypto").setScale(.25,.25),o.textRewardButton=t.add.text(L-85,a,"GET",{fontFamily:"Inter",fontStyle:"Bold",fontSize:18,color:"#FEBB19",stroke:"#000000",strokeThickness:1}).setOrigin(.5),o.textRewardCoin=t.add.text(n+30,a,"12345",{fontFamily:"Inter",fontStyle:"Bold",fontSize:18,color:"#FFFFFF",stroke:"#000000",strokeThickness:1}).setOrigin(0,.5),o.textRewardCrypto=t.add.text(n+230,a,"10",{fontFamily:"Inter",fontStyle:"Bold",fontSize:18,color:"#FFFFFF",stroke:"#000000",strokeThickness:1}).setOrigin(0,.5),o.ShowReward(!1),o.imgFuelIcon=t.add.image(L-270,a,"imgFuel").setScale(.5,.5),o.fxImgFuelIcon=o.imgFuelIcon.preFX.addColorMatrix(),o.fxImgFuelIcon.grayscale(0),o.fxImgBuy=o.imgBuy.preFX.addColorMatrix(),o.fxImgBuy.grayscale(0),o.fxImgCircle=o.imgCircle.preFX.addColorMatrix(),o.fxImgCircle.grayscale(0);let r=L/2-150,l=s+40;return o.textOffer=t.add.text(r,l,`${e[i].title}`,{fontFamily:"Inter",fontStyle:"Bold",fontSize:25,color:"#FEBB19",stroke:"#000000",strokeThickness:1}).setOrigin(0),o.textDescription=t.add.text(r,l+40,`${e[i].description}`,{fontFamily:"Inter",fontStyle:"Bold",fontSize:18,color:"#ffffff",stroke:"#000000",strokeThickness:1,wordWrap:{width:400}}).setOrigin(0),o}}class E{constructor(){this.dataIndex=-1,this.rectBackground,this.rectCase,this.imgCase,this.imgCircle,this.textAmmount,this.textOffer,this.textDescription,this.rectButton,this.imgBuy,this.textBuy,this.textPrice,this.imgFuelIcon,this.rectRewardButton,this.imgRewardButton,this.imgRewardCoin,this.imgRewardCrypto,this.textRewardButton,this.textRewardCoin,this.textRewardCrypto,this.fxImgFuelIcon,this.fxImgBuy,this.fxImgCircle}RequestOpenCase(){(async function(t){return B(`/mini-game/my-chests/${t}/open`,{method:"POST"})})(T.CrateList[this.dataIndex].id).then((t=>{console.log(t),t.success&&this.SetShowReward(t.message,t.coins,t.ton,t.chests_count)}))}SetVisibility(t){this.rectBackground.setVisible(t),this.rectCase.setVisible(t),this.imgCase.setVisible(t),this.imgCircle.setVisible(t),this.textAmmount.visible=t,this.textOffer.visible=t,this.textDescription.visible=t,this.rectButton.setVisible(t),this.imgBuy.setVisible(t),this.textBuy.visible=t,this.textPrice.visible=t,this.imgFuelIcon.setVisible(t),t?(this.SetDefaults(),0==this.textAmmount.text&&this.SetUnavalible()):this.ShowReward(!1)}SetDefaults(){this.textOffer.text=T.CrateList[this.dataIndex].title,this.textDescription.text=T.CrateList[this.dataIndex].description,this.textOffer.setFill("#FEBB19"),this.textDescription.setFill("#ffffff"),this.textAmmount.setFill("#FEBB19"),this.textPrice.setFill("#FFFFFF"),this.textBuy.setFill("#FEBB19"),this.rectBackground.fillColor=2043445,this.rectCase.fillColor=1401470,this.rectButton.fillColor=2563894,this.imgCase.setAlpha(1),this.fxImgFuelIcon.grayscale(0),this.fxImgBuy.grayscale(0),this.fxImgCircle.grayscale(0)}SetUnavalible(){this.textOffer.setFill("#BBBBBB"),this.textDescription.setFill("#BBBBBB"),this.textAmmount.setFill("#5F5F5F"),this.textPrice.setFill("#BBBBBB"),this.textBuy.setFill("#BBBBBB"),this.rectBackground.fillColor=4276545,this.rectCase.fillColor=7895160,this.rectButton.fillColor=2171169,this.imgCase.setAlpha(.5),this.fxImgFuelIcon.grayscale(1),this.fxImgBuy.grayscale(1),this.fxImgCircle.grayscale(1),this.imgBuy.disableInteractive()}SetShowReward(t,e,i,s){this.rectBackground.fillColor=5713858,this.rectCase.fillColor=1709605,this.textOffer.text="Your reward",this.textDescription.text=t,this.textRewardCoin.text=e,this.textRewardCrypto.text=i,this.textAmmount.text=s,this.rectButton.setVisible(!1),this.imgFuelIcon.setVisible(!1),this.imgCircle.setVisible(!1),this.textAmmount.visible=!1,this.textBuy.visible=!1,this.textPrice.visible=!1,this.ShowReward(!0)}ShowReward(t){this.rectRewardButton.setVisible(t),this.imgRewardButton.setVisible(t),this.imgRewardCoin.setVisible(t),this.imgRewardCrypto.setVisible(t),this.textRewardButton.visible=t,this.textRewardCoin.visible=t,this.textRewardCrypto.visible=t}}class R{constructor(){}createBottomButtons(t){let e=D-60;t.add.image(20,e,"imgBluButton2x").setOrigin(0,.5).setScale(1,.8).setInteractive().on("pointerdown",((e,i,s,o)=>{t.caseOpenPage.ShowEverything(!0)})),t.add.image(147,e,"imgIconChest").setOrigin(.5,.5).setScale(.4,.4);let i=L/2;t.add.image(i,e,"imgBluButton2x").setOrigin(.5,.5).setScale(1,.8).setInteractive().on("pointerdown",((e,i,s,o)=>{t.withdrawModal.ShowEverything(!0)})),t.add.image(i+7,e-8,"imgCrypto").setOrigin(.5,.5).setScale(.18,.18),t.add.image(i-10,e+2,"imgCrypto").setOrigin(.5,.5).setScale(.18,.18),t.add.image(i+10,e+8,"imgCrypto").setOrigin(.5,.5).setScale(.18,.18),t.add.image(L-20,e,"imgBluButton2x").setOrigin(1,.5).setScale(1,.8),t.add.image(L-20-127,e,"imgIconSettings").setOrigin(.5,.5).setScale(.55,.55);let s=D-165;t.add.image(i,s,"imgPurpleButton4x").setOrigin(.5,.5).setScale(1,.9).setInteractive().on("pointerdown",((e,i,s,o)=>{t.galaxyPage.ShowEverything(!0)})),t.add.text(i,s,"SPACEPORT",{fontFamily:"Inter",fontStyle:"Bold",fontSize:22,color:"#ffffff",stroke:"#000000",strokeThickness:1}).setOrigin(.5),t.add.image(i-190,s,"imgIconGalaxy").setOrigin(.5,.5).setScale(.5),t.add.image(i+190,s,"imgIconGalaxy").setOrigin(.5,.5).setScale(.5)}}class A{constructor(){this.imgBackground,this.textChoose,this.rectBackPanel,this.rectWalletPanel,this.rectTonPanel,this.textTonWallet,this.textTonAmmount,this.imgCrypto,this.imgButtonWithdraw,this.textWithdraw}ShowEverything(t){this.imgBackground.setVisible(t),this.textChoose.visible=t,this.rectBackPanel.setVisible(t),this.rectWalletPanel.setVisible(t),this.rectTonPanel.setVisible(t),this.imgCrypto.setVisible(t),this.imgButtonWithdraw.setVisible(t),this.textTonWallet.visible=t,this.textTonAmmount.visible=t,this.textWithdraw.visible=t}createWithdrawPage(t){this.imgBackground=t.add.rectangle(0,0,L,D,0,60).setOrigin(0).setInteractive().on("pointerdown",((t,e,i,s)=>{this.ShowEverything(!1)})),this.textChoose=t.add.text(L/2,130,"WITHDRAW TON",{fontFamily:"Inter",fontStyle:"Bold",fontSize:30,color:"#FFFFFF"}).setOrigin(.5);let e=L/2,i=520;this.rectBackPanel=t.add.rectangle(e,250,L-40,330,1401470,40).setOrigin(.5,0).setRounded(10).setStrokeStyle(4,0).setInteractive(),this.rectWalletPanel=t.add.rectangle(e,320,L-80,120,2563894,40).setOrigin(.5,0).setRounded(10).setStrokeStyle(1,0),this.rectTonPanel=t.add.rectangle(e-20,i,L-120,30,2563894,40).setRounded(10).setStrokeStyle(1,0),this.textTonWallet=t.add.text(50,280,"TON wallet:",{fontFamily:"Inter",fontStyle:"Bold",fontSize:18,color:"#ffffff",stroke:"#000000",strokeThickness:1,wordWrap:{width:400}}).setOrigin(0),this.textTonAmmount=t.add.text(50,465,"Enter TON:",{fontFamily:"Inter",fontStyle:"Bold",fontSize:18,color:"#ffffff",stroke:"#000000",strokeThickness:1,wordWrap:{width:400}}).setOrigin(0),this.imgCrypto=t.add.image(40,i,"imgCrypto").setScale(.25,.25).setOrigin(0,.5),this.imgButtonWithdraw=t.add.image(L-135,i,"imgPurpleFuelButton2x").setScale(.4,.4).setInteractive().on("pointerdown",((t,e,i,s)=>{})),this.textWithdraw=t.add.text(L-135,i,"WITHDRAW",{fontFamily:"Inter",fontStyle:"Bold",fontSize:18,color:"#FEBB19",stroke:"#000000",strokeThickness:1}).setOrigin(.5),this.ShowEverything(!1)}}class V{constructor(){this.background,this.modalContainer,this.titleText,this.walletLabel,this.walletInputBg,this.walletInputText,this.amountLabel,this.amountInputBg,this.amountInputText,this.withdrawButton,this.withdrawButtonText,this.closeButton,this.closeButtonText,this.walletHtmlInput=null,this.amountHtmlInput=null,this.walletValue="",this.amountValue="",this.activeInput=null}create(t){this.createHtmlInputs(t),this.background=t.add.rectangle(0,0,L,D,0,.8).setOrigin(0).setInteractive().on("pointerdown",(()=>{this.closeKeyboard(),this.ShowEverything(!1)})),this.modalContainer=t.add.rectangle(L/2,D/2,600,600,2894892,1).setRounded(16).setStrokeStyle(3,4868682).setInteractive().on("pointerdown",(()=>{this.closeKeyboard()})),this.titleText=t.add.text(L/2,D/2-250,"Withdraw TON",{fontFamily:"Inter",fontStyle:"Bold",fontSize:36,color:"#ffffff",stroke:"#000000",strokeThickness:2}).setOrigin(.5).setInteractive().on("pointerdown",(()=>{this.closeKeyboard()})),this.walletLabel=t.add.text(L/2-250,D/2-150,"TON Wallet Address:",{fontFamily:"Inter",fontSize:18,color:"#ffffff"}).setOrigin(0,.5).setInteractive().on("pointerdown",(()=>{this.closeKeyboard()})),this.walletInputBg=t.add.rectangle(L/2,D/2-100,500,50,1710618,1).setRounded(8).setStrokeStyle(2,4868682).setInteractive().on("pointerdown",(()=>{this.activateInput(t,"wallet")})),this.walletInputText=t.add.text(L/2-240,D/2-100,"Tap to enter wallet address",{fontFamily:"Inter",fontSize:14,color:"#888888"}).setOrigin(0,.5),this.amountLabel=t.add.text(L/2-250,D/2-20,"Amount (TON):",{fontFamily:"Inter",fontSize:18,color:"#ffffff"}).setOrigin(0,.5).setInteractive().on("pointerdown",(()=>{this.closeKeyboard()})),this.amountInputBg=t.add.rectangle(L/2,D/2+30,500,50,1710618,1).setRounded(8).setStrokeStyle(2,4868682).setInteractive().on("pointerdown",(()=>{this.activateInput(t,"amount")})),this.amountInputText=t.add.text(L/2-240,D/2+30,"Tap to enter amount",{fontFamily:"Inter",fontSize:14,color:"#888888"}).setOrigin(0,.5),this.withdrawButton=t.add.rectangle(L/2,D/2+130,250,60,2258659,1).setRounded(8).setStrokeStyle(3,0).setInteractive().on("pointerdown",(()=>{this.closeKeyboard(),this.handleWithdraw(t)})).on("pointerover",(()=>{this.withdrawButton.setFillStyle(3377140)})).on("pointerout",(()=>{this.withdrawButton.setFillStyle(2258659)})),this.withdrawButtonText=t.add.text(L/2,D/2+130,"WITHDRAW",{fontFamily:"Inter",fontStyle:"Bold",fontSize:24,color:"#ffffff",stroke:"#000000",strokeThickness:2}).setOrigin(.5),this.closeButton=t.add.rectangle(L/2,D/2+210,250,50,9180429,1).setRounded(8).setStrokeStyle(2,0).setInteractive().on("pointerdown",(()=>{this.closeKeyboard(),this.ShowEverything(!1)})).on("pointerover",(()=>{this.closeButton.setFillStyle(10492432)})).on("pointerout",(()=>{this.closeButton.setFillStyle(9180429)})),this.closeButtonText=t.add.text(L/2,D/2+210,"CLOSE",{fontFamily:"Inter",fontStyle:"Bold",fontSize:20,color:"#ffffff",stroke:"#000000",strokeThickness:1}).setOrigin(.5),this.ShowEverything(!1)}createHtmlInputs(t){this.walletHtmlInput=document.createElement("input"),this.walletHtmlInput.type="text",this.walletHtmlInput.placeholder="Enter TON wallet address",this.walletHtmlInput.maxLength=48,this.walletHtmlInput.autocomplete="off",this.walletHtmlInput.autocorrect="off",this.walletHtmlInput.autocapitalize="off",this.walletHtmlInput.spellcheck=!1,this.walletHtmlInput.style.cssText="\n\t\t\tposition: absolute;\n\t\t\ttop: -9999px;\n\t\t\tleft: -9999px;\n\t\t\twidth: 1px;\n\t\t\theight: 1px;\n\t\t\topacity: 0.01;\n\t\t\tpointer-events: none;\n\t\t\tfont-size: 16px;\n\t\t\tborder: none;\n\t\t\toutline: none;\n\t\t",this.amountHtmlInput=document.createElement("input"),this.amountHtmlInput.type="number",this.amountHtmlInput.inputMode="decimal",this.amountHtmlInput.placeholder="Enter amount",this.amountHtmlInput.step="0.01",this.amountHtmlInput.min="0",this.amountHtmlInput.autocomplete="off",this.amountHtmlInput.style.cssText="\n\t\t\tposition: absolute;\n\t\t\ttop: -9999px;\n\t\t\tleft: -9999px;\n\t\t\twidth: 1px;\n\t\t\theight: 1px;\n\t\t\topacity: 0.01;\n\t\t\tpointer-events: none;\n\t\t\tfont-size: 16px;\n\t\t\tborder: none;\n\t\t\toutline: none;\n\t\t",document.body.appendChild(this.walletHtmlInput),document.body.appendChild(this.amountHtmlInput),this.walletHtmlInput.addEventListener("input",(t=>{if(this.walletValue=t.target.value,this.walletValue){const t=this.walletValue.length>40?this.walletValue.substring(0,20)+"..."+this.walletValue.substring(this.walletValue.length-15):this.walletValue;this.walletInputText.setText(t),this.walletInputText.setStyle({fontSize:16,color:"#ffffff"})}else this.walletInputText.setText("Tap to enter wallet address"),this.walletInputText.setStyle({fontSize:14,color:"#888888"})})),this.amountHtmlInput.addEventListener("input",(t=>{this.amountValue=t.target.value,this.amountValue?(this.amountInputText.setText(this.amountValue),this.amountInputText.setStyle({fontSize:16,color:"#ffffff"})):(this.amountInputText.setText("Tap to enter amount"),this.amountInputText.setStyle({fontSize:14,color:"#888888"}))})),this.walletHtmlInput.addEventListener("blur",(()=>{setTimeout((()=>{"wallet"===this.activeInput&&(this.walletInputBg.setStrokeStyle(2,4868682),this.activeInput=null)}),200)})),this.amountHtmlInput.addEventListener("blur",(()=>{setTimeout((()=>{"amount"===this.activeInput&&(this.amountInputBg.setStrokeStyle(2,4868682),this.activeInput=null)}),200)}))}activateInput(t,e){this.closeKeyboard(),this.walletInputBg.setStrokeStyle(2,4868682),this.amountInputBg.setStrokeStyle(2,4868682),this.activeInput=e,"wallet"===e?(this.walletInputBg.setStrokeStyle(2,2258659),this.walletHtmlInput.value=this.walletValue,setTimeout((()=>{this.walletHtmlInput.focus()}),100)):"amount"===e&&(this.amountInputBg.setStrokeStyle(2,2258659),this.amountHtmlInput.value=this.amountValue,setTimeout((()=>{this.amountHtmlInput.focus()}),100))}closeKeyboard(){this.walletHtmlInput.blur(),this.amountHtmlInput.blur(),this.walletInputBg.setStrokeStyle(2,4868682),this.amountInputBg.setStrokeStyle(2,4868682),this.activeInput=null}handleWithdraw(t){if(!this.walletValue||!this.amountValue)return console.log("Please fill in all fields"),void alert("Пожалуйста, заполните все поля");const e=parseFloat(this.amountValue);if(isNaN(e)||e<=0)return console.log("Please enter a valid amount"),void alert("Пожалуйста, введите корректную сумму");console.log("Withdraw request:"),console.log("Wallet:",this.walletValue),console.log("Amount:",e,"TON"),async function(t,e){return B("/mini-game/ton-withdraw",{method:"POST",body:JSON.stringify({wallet_address:t,ton_amount:e})})}(this.walletValue,e).then((t=>{console.log("Withdrawal result:",t),t&&t.success?alert("Запрос на вывод успешно создан!"):alert("Ошибка при создании запроса на вывод")})).catch((t=>{console.error("Withdrawal error:",t),alert("Произошла ошибка при создании запроса")})),this.resetForm(),this.ShowEverything(!1)}resetForm(){this.walletValue="",this.amountValue="",this.walletInputText.setText("Tap to enter wallet address"),this.walletInputText.setStyle({fontSize:14,color:"#888888"}),this.amountInputText.setText("Tap to enter amount"),this.amountInputText.setStyle({fontSize:14,color:"#888888"}),this.walletHtmlInput.value="",this.amountHtmlInput.value="",this.activeInput=null,this.walletInputBg.setStrokeStyle(2,4868682),this.amountInputBg.setStrokeStyle(2,4868682)}ShowEverything(t){this.background.setVisible(t),this.modalContainer.setVisible(t),this.titleText.setVisible(t),this.walletLabel.setVisible(t),this.walletInputBg.setVisible(t),this.walletInputText.setVisible(t),this.amountLabel.setVisible(t),this.amountInputBg.setVisible(t),this.amountInputText.setVisible(t),this.withdrawButton.setVisible(t),this.withdrawButtonText.setVisible(t),this.closeButton.setVisible(t),this.closeButtonText.setVisible(t),t||this.closeKeyboard()}destroy(){this.walletHtmlInput&&this.walletHtmlInput.parentNode&&this.walletHtmlInput.parentNode.removeChild(this.walletHtmlInput),this.amountHtmlInput&&this.amountHtmlInput.parentNode&&this.amountHtmlInput.parentNode.removeChild(this.amountHtmlInput)}}class z extends o.Scene{constructor(){super("MainMenu"),this.galaxyPage=new C,this.fuelBuyPage=new v,this.caseOpenPage=new P,this.withdrawPage=new A,this.withdrawModal=new V,this.backgroundControll=new c,this.topIndicators=new y,this.bottomButtons=new R}init(){}preload(){T.LoadTextures(this)}create(){this.setupSpaceBackground(),this.add.image(L/2,D/2-30,"maskotFront").setScale(.25,.25),this.galaxyPage.createGalaxyPage(this),this.fuelBuyPage.createFuelBuyPage(this),this.caseOpenPage.createCaseOpenPage(this),this.withdrawPage.createWithdrawPage(this),this.withdrawModal.create(this),this.topIndicators.createTopIndicators(this),this.bottomButtons.createBottomButtons(this),this.cameras.main.fadeIn(500,0,0,0)}update(){this.backgroundControll.refreshUpdate()}setupSpaceBackground(){this.backgroundControll.backLayers.push(new u(this.add.image(L/2,D/2,"imgSpaceBackground"),this.add.image(L/2,D/2,"imgSpaceBackground"),.3,2)),this.backgroundControll.backLayers.push(new u(this.add.image(L/2,D/2,"imgSpaceStars"),this.add.image(L/2,D/2,"imgSpaceStars"),.4,2))}startGame(){this.cameras.main.fadeOut(300,0,0,0),setTimeout((()=>{this.scene.start("Game")}),400)}}class M extends o.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const t=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(e=>{t.width=4+460*e}))}async preload(){this.load.setPath("assets"),this.load.image("logo","logo.png"),await async function(){let t=window.location.href;console.log(t);const e=new URLSearchParams(t).get("token");e&&(x=e,console.log(`Found Token ${e}`))}(),await T.GetLevelData(),await T.GetFuelData(),await T.GetChestData(),this.scene.start("MainMenu")}create(){this.anims.create({key:"explode",frames:this.anims.generateFrameNumbers("sheetCircleExp",{frames:[0,1,2,3,4,5,6,7,8,9,10,11]}),frameRate:12,repeat:0}),this.anims.create({key:"thrust",frames:this.anims.generateFrameNumbers("sheetThrust",{frames:[0,1,2,3]}),frameRate:16,repeat:-1})}}const L=720,D=1280,H={type:o.AUTO,width:L,height:D,parent:"game-container",backgroundColor:"#028af8",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{debug:!1}},scene:[n,M,z,w,S]};document.addEventListener("DOMContentLoaded",(()=>{new o.Game({...H,parent:"game-container"})}));
